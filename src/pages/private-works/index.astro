---
import Layout from '../../layouts/Layout.astro';
import privateWorksData from '../../content/private-works.json';

const { pageTitle, pageSubtitle, pageDescription, sections } = privateWorksData;
---

<Layout title="Private Works - Alex Morris" theme="light">
  <a href="/" class="back-nav">← Home</a>

  <div class="logo-header">
    <a href="/"><img src="/logo-dark.svg" alt="Strat Scraps" /></a>
  </div>

  <main style="padding-top: 6rem;">
    <header style="text-align: center; padding: 2rem;">
      <p class="nav-text" style="color: #666; margin-bottom: 1rem;">
        {pageSubtitle}
      </p>
      <h1 class="heading-primary">{pageTitle}</h1>
      <p style="color: #666; max-width: 500px; margin: 1rem auto; line-height: 1.6;">
        {pageDescription}
      </p>
    </header>

    <div class="section" style="max-width: 600px;">
      {sections.map((section) => (
        <div class="accordion-item">
          <button
            class="accordion-header"
            data-accordion={section.id}
            aria-expanded="false"
          >
            <span>{section.title}</span>
            <span class="accordion-icon">+</span>
          </button>
          <div class="accordion-content" id={section.id}>
            <div style="padding-bottom: 1.5rem; line-height: 1.8;">
              {section.id === 'offering' ? (
                <ul style="padding-left: 1.5rem;">
                  {section.content.split(', ').map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              ) : (
                <p>{section.content}</p>
              )}
            </div>
          </div>
        </div>
      ))}
    </div>
  </main>

  <a href="mailto:alex@stratscraps.com" class="contact-link">Contact</a>
</Layout>

<script>
  document.querySelectorAll('.accordion-header').forEach(button => {
    button.addEventListener('click', () => {
      const accordionId = button.getAttribute('data-accordion');
      const content = document.getElementById(accordionId);
      const icon = button.querySelector('.accordion-icon');
      const isOpen = content?.classList.contains('open');

      document.querySelectorAll('.accordion-content').forEach(el => {
        el.classList.remove('open');
      });
      document.querySelectorAll('.accordion-icon').forEach(el => {
        el.textContent = '+';
      });
      document.querySelectorAll('.accordion-header').forEach(el => {
        el.setAttribute('aria-expanded', 'false');
      });

      if (!isOpen && content) {
        content.classList.add('open');
        if (icon) icon.textContent = '−';
        button.setAttribute('aria-expanded', 'true');
      }
    });
